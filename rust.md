---
title: Learning Rust
date: 2021-06-16 00:39:24
tags:
    - Rust
    - Programing language
    - Learn-note
categories: Language
toc: true
---

é˜…è¯»  [rust online book](https://doc.rust-lang.org/book/) æ—¶è®°å½•çš„ç¬”è®°ï¼Œè¾…ä»¥å¤‡å¿˜ã€‚

<!-- more -->

Rustå…·æœ‰å®‰å…¨é«˜æ•ˆç­‰è¯­è¨€ç‰¹æ€§ï¼Œæä¾›äº†3ä¸ªå·¥å…·ï¼š

- cargo: ä¾èµ–ç®¡ç†å’Œæž„å»ºå·¥å…·
- rustfmt: ä»£ç é£Žæ ¼
- Rust Language Server

# ä¸€ã€å¼€å§‹å­¦ä¹ rust

## hello, world

``` rust
// main.rs
fn main() {
    println!("hello, world!");
}
```

å¯¹äºŽè¿™ä¸ªèµ·ç‚¹ç¨‹åºï¼Œå’ŒCè¯­è¨€ç±»ä¼¼ï¼Œmain å‡½æ•°æ˜¯ rust ç¨‹åºçš„å…¥å£ï¼Œå‡½æ•°ä½“ä½¿ç”¨ '{}' åŒ…å›´ï¼Œå°†å·¦å¤§æ‹¬å·å’Œå‡½æ•°å£°æ˜Žæ”¾åœ¨ä¸€è¡Œæ˜¯ rust æŽ¨èçš„ç¼–ç¨‹ä¹ æƒ¯,æ­¤å¤–ï¼Œrust è¯­è¨€é£Žæ ¼ä½¿ç”¨ 4 ä¸ªç©ºæ ¼æ¥ç¼©è¿›ï¼Œè€Œéž TABï¼Œä¸”ä½¿ç”¨åˆ†å·ä½œä¸ºæ¯ä¸ªè¯­å¥è¡¨è¾¾çš„ç»“æŸã€‚å¯ä»¥ä½¿ç”¨ rustfmt å·¥å…·æ ¼å¼åŒ–ä»£ç ä¸ºå®˜æ–¹æŽ¨èçš„æ ¼å¼

``` shell
> rustfmt main.rs
```

å’Œcè¯­è¨€æœ‰æ‰€åŒºåˆ«çš„æ˜¯ï¼Œç”¨äºŽè¾“å‡ºçš„è¯­å¥ "println!" éžå‡½æ•°ï¼Œè€Œæ˜¯ Rust macroï¼Œå®ƒå’Œå‡½æ•°çš„ç›´è§‚ä¸Šçš„åŒºåˆ«åœ¨äºŽæ˜¯å¦æœ‰ "!"ï¼Œè‹¥ "func_name" åˆ™ä¸ºä¸€ä¸ªæ™®é€šçš„å‡½æ•°

å¯¹äºŽç®€å•çš„ rust ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨ rustc è¿›è¡Œç¼–è¯‘ï¼Œå¹¶å¾—åˆ°å¯è¿è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶

``` shell
> rustc main.rs
```

ç„¶è€Œå¯¹äºŽå¤æ‚çš„å·¥ç¨‹ï¼Œä½¿ç”¨ cargo æ¥ç®¡ç†é¡¹ç›®åˆ™æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚

## ä½¿ç”¨ Cargo

Cargo æ˜¯ Rust è¯­è¨€ç³»ç»Ÿä¸­çš„ä¾èµ–ç®¡ç†å’Œæž„å»ºå·¥å…·ã€‚åˆ©ç”¨cargoåˆ›å»ºæ–°çš„é¡¹ç›®ï¼Œå¹¶åˆ›å»ºæ‰€éœ€çš„æ–‡ä»¶é¡¹ï¼ŒåŒæ—¶åœ¨éž git ä»“åº“ä¸­å°†åŒæ—¶åˆå§‹åŒ– git å¹¶æ·»åŠ  gitignore æ–‡ä»¶ã€‚

``` shell
> cargo new hello_cargo
> tree hello_cargo
  |- Cargo.toml
  |- src
    |- main.rs

```

åœ¨ Cargo.toml æ–‡ä»¶ä¸­è®°å½•äº†é¡¹ç›®ç›¸å…³ä¿¡æ¯å’Œä¾èµ–é¡¹ç›®ï¼Œæ–‡ä»¶ä¸ºTOML (Tomâ€™s Obvious, Minimal Language) æ ¼å¼ã€‚Cargo è®¾è®¡å¸Œæœ›å°†æºç æ”¾åˆ° srcç›®å½•ä¸­ï¼Œé¡¶å±‚ç›®å½•æ”¾ç½® READMEã€LICENSE ç­‰ã€‚

æž„å»ºå’Œè¿è¡Œä½¿ç”¨ Cargo åˆ›å»ºçš„é¡¹ç›®å¾ˆç®€å•ï¼Œåœ¨ç¬¬ä¸€æ¬¡æž„å»ºå®ŒæˆåŽï¼Œåœ¨é¡¶å±‚ç›®å½•å°†åˆ›å»ºä¸€ä¸ª Cargo.lock æ–‡ä»¶ç”¨ä»¥è®°å½•ä¾èµ–ï¼Œæ— éœ€æ‰‹å·¥ç®¡ç†ã€‚

``` shell
> cd hello_cargo
# write binary file into target/
> cargo build 
# exec the program
> cargo run
# or exec the binary file direcly
> ./target/debug/hello_cargo
```

æ­¤å¤– Cargo æä¾›äº†å¿«é€Ÿæ£€æµ‹ä»£ç ä½†ä¸ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶çš„å‘½ä»¤ï¼Œå…¶é€Ÿåº¦å¿«äºŽ buildï¼Œæ‰€ä»¥ç»å¸¸ check ä¸€ä¸‹åˆšåˆšå†™çš„ä»£ç æ˜¯ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ã€‚ 

``` shell
> cargo check
```

å½“ç¨‹åºå‘ç‰ˆä½¿ç”¨æ—¶ï¼Œä½¿ç”¨å¸¦æœ‰ --release å‚æ•°çš„ build å‘½ä»¤ç”Ÿæˆ release ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨ä¼˜åŒ–å°†ä½¿ç¨‹åºå…·å¤‡æ›´é«˜æ•ˆçš„è¿è¡Œæ•ˆçŽ‡ï¼Œä½†æ˜¯ç¼–è¯‘æ—¶é—´ä¼šæ›´é•¿ã€‚

``` shell
> cargo build --release
```

# äºŒã€çŒœæ•°ç¨‹åºå®žè·µ

å®žè·µæ°¸è¿œæ˜¯å­¦ä¹ æ–°ä¸œè¥¿æœ€å¿«çš„æ–¹æ³•ã€‚ä¸‹é¢ä½¿ç”¨ç†ŸçŸ¥çš„çŒœæ•°æ¸¸æˆå­¦ä¹ ä¸€äº›æ–°çš„è¯­è¨€è§„åˆ™ã€‚

é¦–å…ˆï¼Œä½¿ç”¨åœ¨ä¸Šä¸€ç«  hello world ç¨‹åºçš„åŸºç¡€ä¸Šï¼Œå¼•å…¥äº†ä¸€äº›æ–°çš„çŸ¥è¯†ç‚¹ï¼š

``` rust
// main.rs
use std::io;

fn main() {
    println!("Guess the number!");
    println!("Please input your guess.");

    let mut guess = String::new();
    io::stdin()
        .read_line(&mut guess)
        .expect("Failed to read line");
    println!("Your guessd is: {}", guess);
}
```

é»˜è®¤æƒ…å†µä¸‹ rust åªå¼•å…¥äº†å°‘é‡çš„ç±»åž‹ï¼Œä¸ºäº†èŽ·å–ç”¨æˆ·çš„è¾“å…¥è¾“å‡ºï¼Œéœ€è¦ä½¿ç”¨ use å¼•å…¥ std::io åˆ°ä½œç”¨åŸŸä¸­ï¼Œstd è¡¨ç¤º io æ˜¯æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ã€‚

rust ä½¿ç”¨ let å…³é”®å­—åˆ›å»ºå˜é‡å’Œå¸¸é‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œrust æä¾›çš„å˜é‡æ˜¯ä¸å¯å˜çš„ï¼Œè‹¥éœ€è¦å¯å˜çš„å˜é‡éœ€è¦æ˜¾å¼ä½¿ç”¨ mut å…³é”®å­—æŒ‡å‡ºã€‚

``` rust
let foo = bar;     // immutable
let mut foo = bar; // mutable
```

let mut guess = String::new() è¯­å¥ä¸­ï¼Œguess å˜é‡ç»‘å®šåˆ° String::new() çš„è¿”å›žç»“æžœï¼ŒString æ˜¯æ ‡å‡†åº“æä¾›çš„å¯å˜çš„ã€utf-8 æ ¼å¼çš„å­—ç¬¦ä¸²ç±»åž‹ï¼Œ"::" è¡¨ç¤º new æ˜¯ String çš„ä¸€ä¸ªå…³è”å‡½æ•°ï¼Œå…¶æ— éœ€å®žä¾‹åŒ–å³å¯è°ƒç”¨ï¼Œç±»ä¼¼å…¶ä»–è¯­è¨€çš„é™æ€å‡½æ•°ã€‚new() æ–¹æ³•å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ String ç©ºå®žä¾‹ã€‚

ä¸ºäº†å’Œç”¨æˆ·äº¤äº’ï¼Œä½¿ç”¨äº† std::ioï¼Œio::stdin() å°†è¿”å›ž std::io::Stdinï¼Œå³æ ‡å‡† I/O çš„ä¸€ä¸ªå¥æŸ„ï¼Œread_line å‡½æ•°å°†ä»Žç»ˆç«¯èŽ·å–ç”¨æˆ·è¾“å…¥ï¼Œå¹¶**è¿½åŠ **åˆ° guess å­—ç¬¦ä¸²å˜é‡åŽï¼Œå› æ­¤ï¼Œguess å¿…é¡»æ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡ã€‚"&" è¡¨ç¤ºä½¿ç”¨äº†å¯¹è±¡çš„å¼•ç”¨ï¼Œä½¿ç”¨å¼•ç”¨ä»¥é¿å…å¯¹å˜é‡çš„é‡å¤æ‹·è´ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¼•ç”¨å’Œå˜é‡ç›¸åŒï¼Œå‡ä¸ºä¸å¯å˜ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ "&mut guess" è€Œéž "&guess"ã€‚

'.expect("...")' å¯¹å‡½æ•°è¿”å›žç»“æžœçš„æ½œåœ¨é£Žé™©è¿›è¡Œå¤„ç†ã€‚read_line å‡½æ•°è¯»å–ç”¨æˆ·è¾“å…¥ï¼Œå¹¶è¿”å›žä¸€ä¸ª io::Result ç±»åž‹çš„æ•°æ®ã€‚Result ç±»åž‹å¹¿æ³›å­˜åœ¨äºŽ rust çš„å¤šä¸ªæ¨¡å—ä¸­ï¼Œå…¶å®žè´¨æ˜¯ä¸€ä¸ªæžšä¸¾ç±»åž‹ï¼Œå…¶å€¼åŒ…æ‹¬ Errã€Okï¼Œè‹¥å¾—åˆ°çš„è¿”å›žå€¼ä¸º Errï¼Œåˆ™å°†å¯¼è‡´ç¨‹åº crash å¹¶ä½¿ç”¨expectæä¾›çš„ä¿¡æ¯ï¼Œè‹¥å¾—åˆ° Okï¼Œåˆ™è¿”å›žå…¶æºå¸¦çš„æ•°å€¼ã€‚è‹¥ä¸ºä½¿ç”¨ expect å‡½æ•°ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œrust å°†ç»™å‡ºè­¦å‘Šã€‚

rust ä½¿ç”¨ "{}" ä½œä¸ºç¨‹åºæ ¼å¼åŒ–è¾“å‡ºçš„å ä½ç¬¦ï¼š

``` rust
let x = 5;
let y = 6;
println!("x={}, y={}", x, y);
```

å…¶æ¬¡ï¼Œä¸ºäº†å®ŒæˆçŒœæ•°æ¸¸æˆï¼Œéœ€è¦å­¦ä¹ å¦‚ä½•èŽ·å¾—éšæœºæ•°ã€‚rust çš„æ ‡å‡†åº“ä¸­å¹¶ä¸æä¾›éšæœºæ•°çš„æ”¯æŒï¼Œä¸è¿‡å…¶æ‹¥æœ‰ä¸°å¯Œçš„ crates ä½œä¸ºè¯­è¨€çš„æ‰©å±•æ”¯æŒï¼Œä¿®æ”¹ Cargo.toml å¼•å…¥ rand æ¨¡å—çš„ä¾èµ–

```
[dependencies]
rand = "0.8.3"
```

cargo åœ¨æ‰§è¡Œ build æ—¶å°†è‡ªåŠ¨æž„å»ºå¯¹åº”çš„ä¾èµ–å…³ç³»ï¼ŒåŒ…æ‹¬ rand æ¨¡å—æœ¬èº«çš„ä¾èµ–å†…å®¹ã€‚å…¶ç‰ˆæœ¬å·ç¬¦åˆ SemVer æ ‡å‡†ï¼Œè¡¨æ˜Žé¡¹ç›®ä¾èµ–çš„ rand æ¨¡å—éœ€è¦åœ¨ 0.8.3 åˆ° 0.9.0 ä¹‹é—´ï¼Œé«˜äºŽæˆ–ç­‰äºŽ 0.9.0 åˆ™æ— æ³•ä¿è¯ api çš„ä¸€è‡´æ€§ã€‚cargo build å°†åªå¯¹ç¨‹åºä¿®æ”¹å†…å®¹è¿›è¡Œç¼–è¯‘ï¼Œå¼•å…¥çš„ crates åªä¼šç¼–è¯‘ä¸€æ¬¡ã€‚Cargo.lock æŒ‡æ˜Žäº†ä¾èµ–é¡¹ç›®çš„ç‰ˆæœ¬ï¼Œä»Žè€Œä¿è¯ä»»ä½•æ—¶é—´ã€ä»»ä½•äººéƒ½å¯ä»¥æˆåŠŸç¼–è¯‘è¿™ä»½é¡¹ç›®ä»£ç ã€‚åœ¨ crates æœ‰å¯å‡çº§çš„ç‰ˆæœ¬æ—¶ï¼Œè¯·åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ cargo updateã€‚è‹¥éœ€è¦å¤§ç‰ˆæœ¬çš„æ›´æ–°ï¼Œè¯·ä¿®æ”¹ Cargo.toml æ–‡ä»¶ã€‚

ä¸‹é¢ä½¿ç”¨ rand ç”Ÿæˆ 1 åˆ° 100 çš„éšæœºæ•°ï¼š

``` rust
use rand::Rng;

fn main() {
    let secret_number = rand::thread_rng().gen_range(1..101);
}
```

Rng trait ä¸­å®šä¹‰äº†å¾ˆå¤šå…³äºŽéšæœºæ•°ç”Ÿæˆæ–¹æ³•çš„æŽ¥å£ï¼Œä¸ºäº†ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œé¦–å…ˆä½¿ç”¨ use å¼•å…¥ã€‚rand::thread_rng æä¾›äº†éšæœºæ•°ç”Ÿæˆå™¨ï¼šåœ¨å½“å‰çº¿ç¨‹ä¸­å¹¶ä½¿ç”¨ç³»ç»Ÿç§å­è¿è¡Œã€‚åˆ©ç”¨ gen_range ç”Ÿæˆ 1 åˆ° 100 ä¹‹é—´çš„éšæœºæ•°ï¼ŒèŒƒå›´å·¦é—­å³å¼€ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä½¿ç”¨ "1..=100" ä½œä¸ºå·¦é—­å³é—­çš„å‚æ•°ã€‚

å½“ä½¿ç”¨ä¸€ä¸ªæ–°çš„ crate æ—¶ï¼Œå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸­ä½¿ç”¨å‘½ä»¤ cargo doc --open æŸ¥çœ‹å½“å‰é¡¹ç›®ä¸­æ‰€æœ‰æ¨¡å—çš„æ–‡æ¡£ã€‚

æŽ¥ä¸‹æ¥ï¼Œéœ€è¦å¯¹ç”¨æˆ·è¾“å…¥å’Œéšæœºæ•°å­—è¿›è¡Œæ¯”è¾ƒï¼š

``` rust
use std::cmp::Ordering;

fn main() {
    let guess = 2;
    let secret_number = 3;
    match guess.cmp(&secret_number) {
        Ordering::Less => println!("Too small!"),
        Ordering::Greater => println!("Too big!"),
        Ordering::Equal => {
            println!("You win!")
            // more
        },
    }
}

```

ä¸ºäº†è¿›è¡Œç»“æžœçš„æ¯”è¾ƒï¼Œéœ€è¦å¼•å…¥ Orderingï¼Œç±»ä¼¼äºŽ Resultï¼Œå…¶äº¦ä¸ºæžšä¸¾ç±»åž‹ï¼Œä¸è¿‡å…¶å†…åŒ…å« Greaterã€Lessã€Equal ä¸‰ä¸ªå…ƒç´ ã€‚ä½¿ç”¨å˜é‡çš„å†…è”æ–¹æ³• cmp å¯¹ä¸¤ä¸ªæ•°å€¼ç»“æžœè¿›è¡Œæ¯”è¾ƒï¼Œå…¶å°†è¿”å›žä¸€ä¸ª Ordering ç±»åž‹çš„ç»“æžœï¼Œä½¿ç”¨ match å¯¹è¯¥ç»“æžœè¿›è¡Œåˆ†æ”¯æ¯”è¾ƒï¼Œä¾æ¬¡æ¯”è¾ƒ 3 ç§ Ordering çš„å¯èƒ½å€¼ï¼Œå½“åŒ¹é…æˆåŠŸåˆ™æ‰§è¡Œ => åŽçš„è¯­å¥ï¼Œå¯ä»¥ä½¿ç”¨ "{}" æ‰§è¡Œå¤šæ¡è¯­å¥ã€‚

ä¸è¿‡ cmp å‡½æ•°éœ€è¦æ¯”è¾ƒç›¸åŒçš„ç±»åž‹ï¼Œå¦‚æ•´æ•°å’Œ string æ‰§è¡Œ cmpï¼Œå°†æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚rust å†…ç½®äº†ä¸€äº›åŸºæœ¬çš„ç±»åž‹ï¼Œæ¯”å¦‚æ•°å­—çš„ i32ï¼Œu32ï¼Œi64ï¼Œu64 ç­‰ï¼Œåˆ†åˆ«è¡¨ç¤ºæœ‰ç¬¦å·å’Œæ— ç¬¦å·çš„ 32 ä½å’Œ 64 ä½æ•´å½¢æ•°æ®ï¼Œåœ¨å®šä¹‰å˜é‡æ—¶å¯æ˜Žç¡®æŒ‡å‡ºï¼š

``` rust
{
    let secret_number = 3;
    let mut guess = String::new();
    let guess: u32 = guess.trim().parse().expect("Please input number!");
    // get input from terminal here
    match guess.cmp(secret_number) {
        // arms here
    }
}
```

åœ¨ rust ä¸­ï¼Œå¯ä»¥é‡å¤å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œè¿™åœ¨å°†ä¸€ä¸ªæ•°æ®ç±»åž‹è½¬æ¢ä¸ºå…¶ä»–æ•°æ®ç±»åž‹çš„æƒ…å†µä¸‹å¾ˆæœ‰ç”¨ï¼Œæ— éœ€å®šä¹‰ä¸¤ä¸ªä¸åŒç±»åž‹çš„ç›¸åŒå˜é‡ã€‚trim å‡½æ•°å°†åŽ»é™¤å­—ç¬¦ä¸²å‰åŽçš„ç©ºç™½å­—ç¬¦ï¼Œparse å‡½æ•°åˆ™è§£æžå­—ç¬¦ä¸²å¹¶è½¬æ¢ä¸ºæ•°å­—ï¼Œå®šä¹‰å˜é‡æ—¶é€šè¿‡ ": u32" æŒ‡æ˜Ž guess ä¸ºæ— ç¬¦å·32ä½æ•´åž‹æ•°æ®ï¼Œå› æ­¤ï¼Œrust åœ¨æ‰§è¡Œ cmp æ—¶ï¼Œå³å¯éšå¼æŽ¨æ–­ secret_number ä¸ºä¸€ä¸ª u32 ç±»åž‹æ•°æ®ã€‚

rust å¯ä»¥ä½¿ç”¨ loop è¿›è¡Œå¾ªçŽ¯ï¼Œå¹¶ä½¿ç”¨ break å’Œ continue å®žçŽ°å¾ªçŽ¯çš„è·³è½¬ã€‚

``` rust
fn main() {
    loop {
        // loop body
        // break;
        // continue;
    }
}
```

æœ€åŽï¼Œå¯ä»¥ä¸ºæ ‡å‡† io æä¾›æ›´å¥å£®çš„é”™è¯¯å¤„ç†æ–¹å¼:

``` rust
fn main() {
    loop {
        // ...
        io::stdin()
            .read_line(&mut guess)
            .expect("Failed to read line");

        let guess: u32 = match guess.trim().parse() {
            Ok(num) => num,
            Err(\_) => continue,
        };
        // ...
    }
}
```

Ok(num) åŒ¹é…é™„å¸¦ä¸€ä¸ªå‚æ•°çš„ Ok æžšä¸¾å€¼ï¼ŒErr(\_) åŒ¹é…é™„å¸¦ä»»æ„å‚æ•°çš„é”™è¯¯ç»“æžœã€‚å®Œæ•´ç¨‹åºå¦‚ä¸‹ï¼š

``` rust
use std::io;
use std::cmp::Ordering;
use rand::Rng;

fn main() {
    println!("Guess the number!");

    let secret_number = rand::thread_rng().gen_range(1..=100);

    loop {
        println!("Please input your guess.");
        let mut guess = String::new();

        io::stdin()
            .read_line(&mut guess)
            .expect("Failed to read line");

        // let guess: u32 = guess.trim().parse()
        //                        .expect("Please input a number!");

        let guess: u32 = match guess.trim().parse() {
            Ok(num) => num,
            Err(_) => continue,
        };

        println!("Your guessd is: {}", guess);

        match guess.cmp(&secret_number) {
            Ordering::Less => println!("Too small!"),
            Ordering::Greater => println!("Too Big!"),
            Ordering::Equal => { 
                println!("You win!");
                break;
            },
        }
    }
}
```

# ä¸‰ã€è¯­è¨€åŸºç¡€

åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œä¸»è¦å­¦ä¹  rust è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ï¼Œå¦‚å˜é‡ã€æ•°æ®ç±»åž‹ã€å‡½æ•°ã€æ³¨é‡Šä»¥åŠæŽ§åˆ¶æµã€‚

å­¦ä¹ ä¹‹å‰ï¼Œè¯·é¦–å…ˆ[äº†è§£ rust ä¿ç•™çš„å…³é”®å­—](https://doc.rust-lang.org/book/appendix-01-keywords.html)ï¼Œåœ¨åŽç»­ç¨‹åºçš„ç¼–å†™è¿‡ç¨‹ä¸­ä»¥é¿å…ä½¿ç”¨è¿™äº›å…³é”®å­—æ¥å®šä¹‰è‡ªå·±çš„åç§°ã€‚

## å˜é‡åŠå…¶å¯å˜æ€§

æ­£å¦‚ç¬¬äºŒç« æåˆ°çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œrust å®šä¹‰çš„å˜é‡éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œè¿™ä¸Žå…¶ä»–è¯­è¨€æœ‰æ‰€åŒºåˆ«ï¼Œä¹ŸåŒæ ·å› æ­¤ä½¿ rust æ›´å…·å®‰å…¨æ€§å’Œå¹¶å‘æ€§ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦ï¼Œä»¤å®šä¹‰çš„å˜é‡å¯å˜ã€‚

å¦‚ä¹‹å‰æ‰€æåˆ°çš„ï¼Œrust ä½¿ç”¨ let æ¥å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œå¦‚æžœè¯¥å˜é‡æ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦è¿™ä¸ªå˜é‡ç»‘å®šåˆ°æŸä¸ªå€¼åŽï¼Œå…¶å€¼å°†ä¸èƒ½è¢«æ”¹å˜ï¼Œå½“å°è¯•ç¼–è¯‘å¦‚ä¸‹çš„ç¨‹åºæ—¶ï¼Œå°†ä¼šå¤±è´¥ï¼Œå¹¶ç»™å‡º " cannot assign twice to immutable variable" çš„è­¦å‘Šã€‚

``` rust
fn main() {
    let x = 5;
    println!("x is {}", x);
    x = 6;
    println!("x is {}", x);
}
```

rust ä¿è¯äº†å£°æ˜Žä¸ºä¸å¯å˜çš„å˜é‡ä¸€æ—¦ç»‘å®šäº†æ•°å€¼åŽå°†æ°¸è¿œä¸å†æ”¹å˜ï¼Œå¯¹äºŽè¿™ç§å˜é‡ï¼Œæ— éœ€è€ƒè™‘å…¶åœ¨ä½•æ—¶ã€ä½•å¤„ä»¥åŠæ€Žæ ·å‘ç”Ÿæ”¹å˜ã€‚

å¦‚æžœéœ€è¦å¯å˜çš„å˜é‡ï¼Œéœ€è¦ä½¿ç”¨ mut å…³é”®å­—æ˜¾å¼å£°æ˜Žï¼Œåªéœ€å°† mut æ”¾åœ¨å˜é‡åå‰å³å¯ã€‚æ­¤æ—¶æˆ‘ä»¬ä¿®æ”¹ä¸Šè¿°ç¨‹åºå³å¯æ­£å¸¸ç¼–è¯‘å¹¶è¿è¡Œï¼Œå› ä¸ºæˆ‘ä»¬æ“çºµçš„æ˜¯ä¸€ä¸ªå¯å˜çš„å˜é‡ã€‚ä½¿ç”¨å˜é‡çš„å¯å˜æ€§æ˜¯å¯¹é”™è¯¯å’Œæ•ˆçŽ‡ç­‰é—®é¢˜çš„æƒè¡¡å’ŒæŠ˜ä¸­ï¼Œä¸å¯å˜è¡Œæä¾›äº†æ›´é«˜çš„å®‰å…¨æ€§ï¼Œè€Œå¯å˜å˜é‡åˆ™å¯èƒ½é¿å…äº†æ–°å˜é‡çš„åå¤åˆ›å»ºå’Œæ‹·è´ç­‰ã€‚

``` rust
fn main() {
    // let x = 5;
    let mut x = 5;
    println!("x is {}", x);
    x = 6;
    println!("x is {}", x);
}
```

åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œæœ‰å¸¸é‡ï¼ˆconstantï¼‰çš„æ¦‚å¿µï¼Œç±»ä¼¼äºŽ rust çš„ä¸å¯å˜å˜é‡ï¼Œä½†æ˜¯ rust çš„å¸¸é‡å’Œå˜é‡å­˜åœ¨ä¸€äº›åŒºåˆ«ï¼š

- ä¸å…è®¸å°† mut å’Œå¸¸é‡ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸ºå¸¸é‡æ˜¯æ°¸è¿œçš„æ’å€¼ï¼Œè€Œéžé»˜è®¤ä¸ºæ’å€¼ï¼›
- å½“ä½¿ç”¨ const è€Œä¸æ˜¯ let æ¥å£°æ˜Žä¸€ä¸ªå¸¸é‡æ—¶ï¼Œå¿…é¡»æŒ‡æ˜Žæ•°æ®ç±»åž‹ï¼›
- const å¯ä»¥å£°æ˜Žåœ¨ä»»æ„ä½œç”¨åŸŸä¸­ï¼ŒåŒ…æ‹¬å…¨å±€ä½œç”¨ï¼Œè€Œ let æ— æ³•å£°æ˜Žåœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼›
- å¸¸é‡çš„å€¼åªèƒ½æ˜¯å¸¸é‡è¡¨è¾¾å¼ï¼Œä¸èƒ½æ˜¯ä»»æ„ä¸€ä¸ªè¿è¡Œæ—¶èŽ·å–çš„å€¼ã€‚

ä¸‹é¢å£°æ˜Žäº†ä¸¤ä¸ªå¸¸é‡ï¼Œrust å»ºè®®ä½¿ç”¨å¤§å†™ä½œä¸ºå¸¸é‡çš„åç§°ï¼Œå¦åˆ™å°†åœ¨ç¼–è¯‘å™¨ç»™å‡ºè­¦å‘Šã€‚

``` rust
const MAX: u32 = 123;
fn main() {
    let x = 5;
    const MIN: u32 = 123;
    println!("x is {}, MAX is {}, MIN is {}", x, MAX, MIN);
}
```

é™¤å˜é‡ä¸å¯å˜çš„ç‰¹æ€§å¤–ï¼Œå˜é‡ä¸Žå…¶ä»–è¯­è¨€ä»æœ‰ä¸€ä¸ªæ˜Žæ˜¾çš„ç‰¹ç‚¹ï¼šrust æ”¯æŒå¯¹å·²å®šä¹‰çš„å˜é‡è¿›è¡Œè¦†ç›–ï¼ˆå¸¸é‡ä¸å…·æœ‰è¿™æ ·çš„ç‰¹æ€§ï¼Œrust å°†å…¶ç§°ä¸º Shadowingï¼‰ï¼Œå³åœ¨å·²å®šä¹‰çš„å˜é‡åŽï¼Œå¯ä»¥é‡æ–°å®šä¹‰ä¸€ä¸ªåŒåçš„å˜é‡æ¥è¦†ç›–ï¼Œå¦‚ä¸‹é¢ç»™å‡ºçš„ç¨‹åºï¼Œæœ€åŽ x çš„å€¼ä¸º 7ã€‚

``` rust
fn main() {
    let x = 5;
    let x = x + 1;
    let x = x + 1;
    println!("x is {}", x);
}
```

Shadowing å’Œ mut æ˜¯ä¸åŒçš„ï¼Œè‹¥æ²¡æœ‰ let å…³é”®å­—ï¼Œè¿™ç§ "x = x + 1" å¯¹å˜é‡çš„æ“ä½œæ˜¯ä¸å…è®¸çš„ï¼Œé€šè¿‡Shadowing å¯ä»¥å¯¹å·²æœ‰å˜é‡è¿›è¡Œä¸€äº›è½¬æ¢å¹¶å¾—åˆ°æ–°çš„ä¸å¯å˜å˜é‡ã€‚

é™¤äº†ä¸Šè¿°ç‰¹æ€§å¤–ï¼ŒShadowing ä¹Ÿå¯ä»¥å®žçŽ°ä¸åŒç±»åž‹çš„è½¬æ¢ï¼Œè¿™å’Œ mut æ˜¯ä¸åŒçš„ï¼š

``` rust
let spaces = "  ";        // String
let spaces = space.len(); // integer
```

å¦‚æžœä½¿ç”¨ mut æ¥å®šä¹‰ spacesï¼Œåˆ™æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œå³æˆ‘ä»¬ä¸èƒ½æ”¹å˜ mut å˜é‡åçš„ç±»åž‹ã€‚

## åŸºæœ¬æ•°æ®ç±»åž‹

rust æ˜¯é™æ€ç±»åž‹è¯­è¨€ï¼Œåœ¨ç¼–è¯‘æœŸå¿…é¡»æ˜Žç¡®å„ä¸ªå˜é‡çš„æ•°æ®ç±»åž‹ã€‚æ•°æ®ç±»åž‹å¯ä»¥åœ¨ä»£ç ä¸­æ˜Žç¡®æŒ‡å®šï¼Œé™¤æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡æŽ¨æ–­ã€‚å¦‚çŒœæ•°æ¸¸æˆä¸­ï¼Œå®šä¹‰ guess å¿…é¡»æŒ‡å®šå…¶ç±»åž‹ä¸º "u32"ï¼Œå¦åˆ™ï¼Œparse å‡½æ•°é€šè¿‡ç¼–è¯‘ã€‚

``` rust
let guess: u32 = "42".parse().expect("Not a number!");
```

ä¸‹é¢ä»‹ç» rust æ•°æ®ç±»åž‹çš„ä¸¤ä¸ªå­é›†ï¼šæ ‡é‡ç±»åž‹å’Œå¤åˆç±»åž‹ã€‚

### æ ‡é‡ç±»åž‹

rust ä¸­çš„æ ‡é‡ç±»åž‹ï¼Œå³åœ¨å…¶ä»–è¯­è¨€ä¸­å¸¸è§çš„å¦‚æ•´åž‹ã€æµ®ç‚¹ç±»åž‹ã€å¸ƒå°”ç±»åž‹å’Œå­—ç¬¦ç±»åž‹ã€‚

#### æ•´åž‹

åœ¨ rust è¡¨ç¤ºæ•´å½¢çš„æ–¹æ³•ä¸º "u/iä½é•¿åº¦"ï¼Œu è¡¨ç¤ºæ— ç¬¦å·æ•°ï¼Œiè¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ï¼ŒåŒ…æ‹¬ï¼š

| é•¿åº¦ | æœ‰ç¬¦å· | æ— ç¬¦å· |
| :-----: | :----: | :----: |
| 8-bits | i8 | u8 |
| 16-bits | i16 | u16 |
| 32-bits | i32 | u32 |
| 64-bits | i64 | u64 |
| 128-bits | i128 | u128 |
| arch | isize | usize |

å¯ä»¥ä½¿ç”¨ "i/usize" ä½¿ç”¨æ“ä½œç³»ç»Ÿæ”¯æŒçš„æ•´å½¢é•¿åº¦ï¼Œåœ¨å¯¹é›†åˆè¿›è¡Œç´¢å¼•æ—¶å¸¸å¸¸ä½¿ç”¨åˆ°è¿™ç§ç±»åž‹ã€‚æ­¤å¤–ï¼Œrust æ”¯æŒå¤šç§è¿›åˆ¶çš„å­—é¢å€¼è¡¨ç¤ºï¼š

| å­—é¢å€¼ç±»åž‹ | è¡¨ç¤º |
| :-----: | :----: |
| 10è¿›åˆ¶ | 123_456_789 |
| 16è¿›åˆ¶ | 0xABCD |
| 8è¿›åˆ¶ | 0o77 |
| 2è¿›åˆ¶ | 0b1111_0000 |
| å­—ç¬¦(u8) | b'A'


#### æµ®ç‚¹ç±»åž‹

rust ä½¿ç”¨ f32 å’Œ f64 åˆ†åˆ«è¡¨ç¤º 32 ä½æµ®ç‚¹æ•°å’Œ 64 ä½æµ®ç‚¹æ•°ï¼Œrust é»˜è®¤ä½¿ç”¨ 64 ä½æµ®ç‚¹æ•°ã€‚

``` rust
fn main() {
    let a = 1.0;        // f64
    let x: f32 = 1.2;   // f32
    let y: f64 = 2.2;   // f64
}
```

#### æ•°å€¼æ“ä½œ

åŒæ ·ï¼Œrust ä¸ºæ•°å€¼ç±»åž‹æä¾›äº†åŠ å‡ä¹˜é™¤çš„æ“ä½œç¬¦ï¼Œå…¶è®¡ç®—ç»“æžœç»‘å®šåˆ°ä¸€ä¸ªå˜é‡ä¸Šï¼š

``` rust
fn main() {
    let sum = 1 + 2;
    let dif = 2 - 1;
    let mul = 1 * 2;
    let div = 2 / 1;
    let m   = 2 % 1;
}
```

#### å¸ƒå°”ç±»åž‹

rust ä½¿ç”¨ trueã€false ä½œä¸ºå¸ƒå°”å€¼ bool çš„å­—é¢å€¼ï¼š

``` rust
fn main() {
    let t = true;
    let f: bool = false; // with explicit type annotation
}
```

#### å­—ç¬¦ç±»åž‹

rust çš„ char ç±»åž‹ä¸º 4 å­—èŠ‚çš„é•¿åº¦çš„ unicode æ”¯æŒçš„å¸¸é‡å€¼ï¼Œèƒ½å¤Ÿè¡¨ç¤ºåŒ…æ‹¬ä¸­æ–‡ã€æ—¥æ–‡ç­‰å¤šç§å­—ç¬¦ã€‚ä½¿ç”¨å•å¼•å·è¡¨ç¤ºï¼š

``` rust
fn main() {
    let c = 'z';
    let z = 'â„¤';
    let heart_eyed_cat = 'ðŸ˜»';
}
```

### å¤åˆç±»åž‹

rust çš„å¤åˆç±»åž‹å¯ä»¥å°†å¤šä¸ªæ•°å€¼é›†åˆåˆ°ä¸€ä¸ªæ•°æ®ç±»åž‹ä¸­æ¥è¡¨ç¤ºï¼Œä¸»è¦æœ‰ä¸¤ç§ï¼šå…ƒç»„ï¼ˆtuplesï¼‰å’Œæ•°ç»„ï¼ˆarraysï¼‰ã€‚

#### å…ƒç»„

å…ƒç»„æ˜¯ä¸€ç§å°†å¤šç§ä¸åŒç±»åž‹æ•°æ®é›†åˆåˆ°ä¸€èµ·çš„å¸¸ç”¨çš„æ–¹æ³•ï¼Œå…¶ä¸€æ—¦åˆ›å»ºï¼Œé•¿åº¦å›ºå®šä¸å¯ä¿®æ”¹ï¼Œå…ƒç»„ä½¿ç”¨åœ†æ‹¬å·è¡¨ç¤ºï¼š

``` rust
fn main() {
    let tup: (i32, f64, u8) = (500, 6.4, 1);
}
```

ä½¿ç”¨å…ƒç»„ï¼Œæœ‰æ–¹ä¾¿çš„æ–¹æ³•å¯¹å…¶ä¸­çš„æ¯ä¸ªå…ƒç´ è§£åŒ…ï¼š

``` rust
fn main() {
    let tup = (500, 6.4, 1);

    let (x, y, z) = tup;

    println!("The value of y is: {}", y);
}
```

é™¤æ­¤ä¹‹å¤–ï¼Œå¯ä»¥é€šè¿‡å…ƒç»„ç´¢å¼•æ¥è®¿é—®å…¶ä¸­ä»»æ„å…ƒç´ ï¼Œä½¿ç”¨ "tuple.index" å®žçŽ°ï¼Œå…¶ç´¢å¼•èŒƒå›´ä»Ž 0 å¼€å§‹ï¼š

``` rust
fn main() {
    let x: (i32, f64, u8) = (500, 6.4, 1);

    let five_hundred = x.0;

    let six_point_four = x.1;

    let one = x.2;
}
```

#### æ•°ç»„

æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ çš„æ•°æ®ç±»åž‹å¿…é¡»ç›¸åŒï¼Œå…¶é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä½¿ç”¨æ–¹æ‹¬å·è¡¨ç¤ºï¼š

``` rust
fn main() {
    let a = [1, 2, 3, 4, 5];
}
```

å½“æ‰€éœ€æ•°æ®é›†åˆä¸ºç›¸åŒç±»åž‹ä¸”å¸Œæœ›å°†æ•°æ®åˆ†é…åœ¨å †ä¸Šè€Œä¸æ˜¯æ ˆä¸Šæˆ–å§‹ç»ˆéœ€è¦å›ºå®šæ•°é‡çš„æ•°æ®æ—¶ï¼Œä½¿ç”¨æ•°æ®å¯èƒ½æ˜¯ä¸€ä¸ªé€‰æ‹©ï¼Œä¸è¿‡ï¼Œå…¶ä¸å¦‚ vector ï¼ˆæ ‡å‡†åº“æä¾›ï¼ŒåŽç»­ä»‹ç»ï¼‰çµæ´»ï¼ŒåŽè€…å¯åŠ¨æ€æ‰©å®¹ã€‚è‹¥æ— æ³•æ˜Žç¡®ä½¿ç”¨æ•°ç»„æˆ– vectorï¼Œè¯·ä½¿ç”¨ vectorã€‚

å¦‚ï¼Œç¨‹åºéœ€è¦å›ºå®šçš„ä¸€äº›ä¿¡æ¯ï¼Œä½¿ç”¨ arrayï¼š

``` rust
fn main() {
    let months = ["January", "February", "March", "April", "May", "June", "July",
                "August", "September", "October", "November", "December"];
}
```

å£°æ˜Žæ•°ç»„æ—¶ï¼Œä¹Ÿå¯æŒ‡æ˜Žå…ƒç´ ç±»åž‹å’Œé•¿åº¦ï¼š

``` rust
let a: [i32; 5] = [1, 2, 3, 4, 5];
```

å¯ä»¥åˆ›å»ºä¸€ä¸ªæœ‰ç›¸åŒå…ƒç´ çš„æ•°ç»„ï¼š

``` rust
let a = [3; 5];
```

a çš„å€¼ä¸º [3, 3, 3, 3, 3]ã€‚

æ•°ç»„çš„å…ƒç´ å€¼å¯ä»¥ä½¿ç”¨ç´¢å¼•è®¿é—®ï¼š

``` rust
let a = [1, 2, 3, 4, 5];
let first = a[0];
let end   = a[4];
```

åœ¨ç¨‹åºä¸­ï¼Œå¦‚æžœæ½œåœ¨ç´¢å¼•è¶Šç•Œï¼Œç¨‹åºæ˜¯å¯ä»¥ç¼–è¯‘æˆåŠŸçš„ï¼Œä½†å½“è¿è¡Œæ—¶é‡åˆ°è¶Šç•Œé—®é¢˜ï¼Œå°†å¯¼è‡´ç¨‹åºè¿è¡Œå¤±è´¥ã€‚åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œå½“é‡åˆ°è¶Šç•Œé—®é¢˜æ—¶ï¼Œç¨‹åºä¼šç»§ç»­è¿è¡Œï¼Œè€Œ rust å°†é˜»æ­¢è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œé€šè¿‡ç«‹å³é€€å‡ºæ¥é˜»æ­¢å¯¹éžæ³•å†…å­˜çš„è®¿é—®ï¼Œè¿™é‡Œåˆ©ç”¨æ‰€å­¦çš„è¯­è¨€ç‰¹æ€§æä¾›äº†ä¾‹å­

``` rust
use std::io;

fn main() {
    let a = [1, 2, 3, 4, 5];

    println!("input index:");

    let mut index = String::new();

    io::stdin()
        .read_line(&mut index)
        .expect("Faile to read line");

    let index : usize = index.trim().parse().expect("Index not a number"); 

    let element = a[index];

    println!("value is {}, index is {}", element, index);
}
```

## å‡½æ•°

### å‡½æ•°å®šä¹‰å’Œä¼ å‚

rust ä½¿ç”¨ fn å…³é”®å­—æ¥å®šä¹‰å‡½æ•°ï¼Œå¦‚æ‰€è§çš„ main å‡½æ•°ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥å®šä¹‰å…¶ä»–å‡½æ•°ï¼ŒåŒ…æ‹¬æ— å‚æ•°å‡½æ•°ã€æœ‰å‚æ•°å‡½æ•°ç­‰ï¼Œå‡½æ•°å‚æ•°å¿…é¡»æŒ‡æ˜Žæ•°æ®ç±»åž‹ï¼Œå½“ç„¶å„ä¸ªå‚æ•°å¯ä»¥æœ‰å„è‡ªçš„ç±»åž‹ã€‚

``` rust
fn main() {
    test();
    test_args(x: i32, y: i32);
}

fn test() {
    println!("This is test fn");
}

fn test_args(x: i32, y: i32) {
    println!("The arg is x:{}, y:{}", x, y);
}
```

### statements å’Œ expressions

å‡½æ•°ä½“ç”± statements å’Œ expressions ç»„æˆï¼Œexpressions æ˜¯ statement çš„ä¸€éƒ¨åˆ†ã€‚rust æ˜¯åŸºäºŽè¡¨è¾¾å¼çš„è¯­è¨€ ï¼ˆ expression-basedï¼‰ã€‚statement æ‰§è¡Œä¸€äº›åŠ¨ä½œä½†æ˜¯ä¸è¿”å›žå€¼ï¼Œexpression æ€»æ˜¯èƒ½å¤ŸæŽ¨æ–­å‡ºç»“æžœã€‚å¦‚ let è¯­å¥ä¸ºä¸€ä¸ª statementï¼š

``` rust
fn main() {
    let x = 6;
}
```

å¦‚æžœè¯•å›¾å°† let è¯­å¥ç»‘å®šåˆ°ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œå°†æ— æ³•ç¼–è¯‘ï¼Œå› ä¸º let è¯­å¥ä¸èƒ½è¿”å›žå€¼ï¼Œå› æ­¤ä¹Ÿä¸èƒ½ç»‘å®šæ–°çš„å˜é‡ã€‚å› æ­¤ï¼Œåœ¨ rust ä¸­ä¸Žç±»ä¼¼äºŽ C è¯­è¨€çš„ x=y=1 çš„è¡Œä¸ºä¸åŒã€‚

``` rust
fn main() {
    let y = (let x = 6); // comile error
}
```

ä»¥ä¸Šçš„å‡½æ•°å®šä¹‰ä¹Ÿæ˜¯ä¸€ä¸ª statementã€‚è€Œè®¡ç®—å¹¶å¯å¾—åˆ°ç»“æžœçš„è¡¨è¾¾å¼ç»„æˆäº† rust ç¨‹åºçš„ç»å¤§éƒ¨åˆ†ï¼Œè¯¸å¦‚ 5 + 6ã€100ã€è°ƒç”¨å‡½æ•°ã€è°ƒç”¨å®ç­‰ä»¥åŠä½¿ç”¨ "{}" åŒ…è£¹çš„å¤šæ¡è¯­å¥ï¼Œéƒ½æ˜¯æˆ–èƒ½å¤Ÿæˆä¸ºè¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼çš„ç»“å°¾ä¸åŒ…å«åˆ†å·ï¼Œå¦åˆ™å…¶å°†è½¬æ¢ä¸º statementï¼Œå¹¶ä¸”å°†ä¸ä¼šè¿”å›žå€¼ã€‚

``` rust
fn main() {
    let x = 1;
    let y = {
        let x = 10;
        x + 1
    }; // ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ³¨æ„ x + 1 åŽæ— åˆ†å·ç»“å°¾ï¼Œæ­¤ expression ç»“æžœä¸º 11
    println!("x out is {}", x);
    println!("y is {}", y);
}
```

### å‡½æ•°è¿”å›žå€¼

åœ¨ rust ä¸­ï¼Œ ä½¿ç”¨ "->" æ¥æŒ‡æ˜Žè¿”å›žå€¼ç±»åž‹ï¼Œæ•´ä¸ªå‡½æ•°ä½“å’Œ "{}" åŒ…è£¹çš„è¡¨è¾¾å¼æ˜¯åŒä¹‰çš„ã€‚å½“ç„¶ï¼Œå‡½æ•°å¯ä»¥ä½¿ç”¨ return å…³é”®å­—æå‰è¿”å›žç»“æžœï¼Œå¤§å¤šæ•°å‡½æ•°éšå¼è¿”å›žæœ€åŽä¸€ä¸ªè¡¨è¾¾å¼ã€‚

``` rust
fn five() -> i32 {
    5
}

fn main() {
    let x = five();

    println!("The value of x is: {}", x);
}
```

å¦‚æžœå‡½æ•°çš„æœ€åŽä¸€ä¸ªè¯­å¥åŠ ä¸Šäº†åˆ†å·ï¼Œä¸”æŒ‡æ˜Žå‡½æ•°éœ€è¦è¿”å›žå€¼æˆ–éœ€è¦ä½¿ç”¨å®ƒçš„è¿”å›žå€¼ï¼Œæ­¤æ—¶å°†æ— æ³•ç¼–è¯‘ï¼Œå› ä¸ºçŽ°åœ¨ expression å› ä¸ºåˆ†å·å˜æˆäº† statementã€‚

## ç¨‹åºæ³¨é‡Š

æ”¯æŒ "//" çš„è¡Œæ³¨é‡Šå’Œæ–‡æ¡£æ³¨é‡Šï¼ˆåŽç»­ç« èŠ‚ä¸­ä»‹ç»ï¼‰ã€‚

## æŽ§åˆ¶æµ

### åˆ†æ”¯

ä½¿ç”¨ if else åˆ†æ”¯ï¼Œå½“ if åŽçš„æ¡ä»¶ä¸º trueï¼Œå°†æ‰§è¡Œå…¶åŽ "{}" åŒ…è£¹çš„è¯­å¥ï¼Œæˆ–ç§° armsã€‚

``` rust
fn main() {
    let x = 7;
    if x > 5 {
        println!("x > 5");
    } else {
        println!("x <= 5");
    }
}
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œrust ä¸­ï¼Œif çš„æ¡ä»¶**å¿…é¡»æ˜¾å¼ä¸º bool ç±»åž‹**ï¼Œå¦åˆ™ä¸èƒ½é€šè¿‡ç¼–è¯‘ï¼Œè¿™ä¸Ž C çš„éšå¼è½¬æ¢ä¸åŒã€‚

``` rust
fn main() {
    let y = 1;
    if y {
        println!("y is not 0");
    }
} // ä¸èƒ½é€šè¿‡ç¼–è¯‘ï¼Œä¸å­˜åœ¨åˆ° bool çš„éšå¼è½¬æ¢ã€‚
```

å½“å­˜åœ¨å¤šä¸ªæ¡ä»¶çŠ¶æ€æ—¶ï¼Œä½¿ç”¨ else if è¯­å¥å¤„ç†ï¼š

``` rust
fn main() {
    let number = 6;

    if number % 4 == 0 {
        println!("number is divisible by 4");
    } else if number % 3 == 0 {
        println!("number is divisible by 3");
    } else if number % 2 == 0 {
        println!("number is divisible by 2");
    } else {
        println!("number is not divisible by 4, 3, or 2");
    }
}
```

å½“ä»£ç å­˜åœ¨è¿‡å¤šçš„ else if éœ€è¦è¿›è¡Œé‡æž„ï¼ŒåŽç»­å°†ä»‹ç» match æ¥åº”å¯¹è¿™ç§çŠ¶å†µã€‚

### è¡¨è¾¾å¼ä¸­çš„åˆ†æ”¯

``` rust
fn main() {
    let z = if y { 199 } else { 299 };
    println!("z is {}", z);
}
```

éœ€è¦æ³¨æ„ï¼Œå„ä¸ª arms çš„å€¼çš„ç±»åž‹å¿…é¡»ç›¸åŒï¼Œå¦åˆ™æ— æ³•ç¼–è¯‘ï¼Œrust å¿…é¡»åœ¨ç¼–è¯‘å™¨æ˜Žç¡®å„ä¸ªå˜é‡çš„ç±»åž‹ã€‚

### å¾ªçŽ¯

ä½¿ç”¨ loop æ‰§è¡Œå¾ªçŽ¯æ“ä½œï¼Œé…åˆ break å’Œ continue æ¥å®žçŽ°å¾ªçŽ¯å†…å¤æ‚çš„è·³è½¬ã€‚

``` rust
fun main() {
    loop {
        println!("again");
    }
}
```

ä¸Ž c è¯­è¨€ä¸åŒçš„ï¼Œrust çš„å¾ªçŽ¯ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆexpressionï¼‰ï¼Œå³å…¶å¯ä»¥è¿”å›žå€¼ï¼š

``` rust
fn main() {
    let mut counter = 1;
    let result = loop {
        counter += 1;
        if counter == 10 {
            break counter * 2;
        }
    };
    println!("result is {}", result); // result = 20
}
```

### å¸¦æœ‰æ¡ä»¶çš„å¾ªçŽ¯

å’Œå…¶ä»–è¯­è¨€ç±»ä¼¼ï¼Œrust æä¾›äº†å¸¦æœ‰æ¡ä»¶çš„ while å¾ªçŽ¯ï¼Œå…¶è¡Œä¸ºå’Œå…¶ä»–è¯­è¨€ç±»ä¼¼ï¼š

``` rust
fn main() {
    let mut number = 3;

    while number != 0 {
        println!("{}!", number);

        number -= 1;
    }
    println!("LIFTOFF!!!");
}
```

### èŒƒå›´for

å½“éåŽ†ä¸€ä¸ªé›†åˆæ—¶ï¼Œfor å¾ªçŽ¯æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„é€‰æ‹©ï¼š

``` rust
fn main() {
    let a = [10, 20, 30, 40, 50];

    for element in a.iter() {
        println!("the value is: {}", element);
    }
}
```

å¦‚ä½¿ç”¨ for é€†åºæ‰“å°å¾— 3ã€2ã€1ï¼š

``` rust
for number in (1..4).rev() {
        println!("{}!", number);
    }
    println!("LIFTOFF!!!");
```


# å››ã€æ‰€æœ‰æƒï¼ˆownershipï¼‰

æ‰€æœ‰æƒæ˜¯ rust è¯­è¨€çš„é‡è¦æ¦‚å¿µï¼Œå…¶ä½¿ rust åœ¨æ²¡æœ‰åžƒåœ¾å›žæ”¶çš„æƒ…å†µä¸‹ä¿è¯äº†å†…å­˜å®‰å…¨ã€‚

## æ¦‚å¿µ

## å¼•ç”¨å’Œå€Ÿç”¨ ï¼ˆReference and Borrowingï¼‰

## åˆ‡ç‰‡ç±»åž‹ï¼ˆSlice Typeï¼‰
